<!DOCTYPE html>
<html lang='en-us'>

<head>
    <meta charset="UTF-8">
    <title>Database Design</title>
    <link href="../css/outline_styles.css" rel="stylesheet">
</head>

<body>
    <main>
      <nav>
        <div class="tab">
            <a href="../text/week01.html"><button class="tablinks">1 Data</button></a>
            <a href="../text/week02.html"><button class="tablinks">2 Questions</button></a>
            <a href="../text/week03.html"><button class="tablinks">3 Queries</button></a>
            <a href="../text/week04.html"><button class="tablinks">4 Aggregates</button></a>
            <a href="../text/week05.html"><button class="tablinks">5 Functions</button></a>
            <a href="../text/week06.html"><button class="tablinks">6 Relational</button></a>
            <a href="../text/week07.html"><button class="tablinks">7 Joins</button></a>
            <a href="../text/week08.html"><button class="active" class="tablinks">8 Design</button></a>
            <a href="../text/week09.html"><button class="tablinks">9 Inserting</button></a>
            <a href="../text/week10.html"><button class="tablinks">10 More</button></a>
            </div>
        </nav> 
      <div id='text'>
        <h1>8 How Do We Design a Database?</h1>

        <h2>Database Design</h2>

        <p>With database design we are trying to organize the data in such a way that redundancy is minimized without losing any data. Redundancy is when we repeat the same data more than once. For example, each time a student registers for a class their name and address might be repeated for each class in which they are registered. Another way you might have repeating data is if you have a list of those same students and their addresses in a separate file listing parking passes or ticket violations. Say the student’s address changes, then changing the address would mean editing in different locations; not only in multiple places in registration, but also in a different file at the parking office. There is a greater chance of making a data entry mistake when you must edit in multiple places. It takes more time and resources as well. Having multiple copies of information also increases the chances for unauthorized access to data that should be secure. </p>
        <p>Good design also means our data should be accurate and reliable. Setting up constraints on our data is a good way to ensure it has integrity and is consistent. We learned about what data integrity and data consistency were earlier and now we will see this in action as we design a database.</p>
        <p>For relational database design, reducing redundancy means splitting the data up into separate entities or tables to minimize redundancy. But it is not always clear how to do this, especially with large ‘real-life’ databases. Database design can be complex. You may not be the person who will design a database, usually this is the database administrator, but knowing the proper way to design a database will help you understand the structure of the database you work with.</p>

        <h2>The Statement of Work</h2>

        <p>It is wise to start with determining what output is needed and work backwards from there to determine what data is even going to be used in the database. As you analyze the needs of the business you can determine what is needed for the database. This may require a lengthy time period to accomplish. Remember this process can begin with the Statement of Work (SOW) that was covered earlier. A SOW is a document that describes the work that needs to be done on a project. It can help clarify the project for both the users and the database designer. 
        </p>

        <h2>Basic Steps for Proper Design</h2>

        <p>Relational databases model real-world environments. The designer must analyze the real-world system and design it into a relational database.</p>
        
        <p>A data model organizes data and standardizes how the data relate to each other. The purpose of the model is to show the data needed and created by business processes. The data model determines the structure of data and the relationships and constraints of the data. </p>

        <p>Let’s look at an example of designing for a system that uses books and their associated information as output. Here’s a flat file showing all the data that is needed for the system:</p>

        <table class='results'>
            <tr>
                <th>ISBN</th>
                <th>Title</th>
                <th>Author</th>
                <th>Author Address</th>
                <th>Publisher</th>
                <th>Publisher Address</th>
            </tr>
            <tr>
                <td>1-1111-1111-1</td>
                <td>Intro to Databases</td>
                <td>Sue Smith </td>
                <td>123 Street</td>
                <td>Acme Publishing</td>
                <td>60 Main Street</td>
            </tr>
            <tr>
                <td>2-2222-2222-2</td>
                <td>Database Design</td>
                <td>John Jones</td>
                <td>44 Fourth Ave</td>
                <td>Frontier Inc</td>
                <td>25th N 700 E</td>
            </tr>
            <tr>
                <td>3-3333-3333-3</td>
                <td>Data Retrieval</td>
                <td>Sue Smith</td>
                <td>123 Street</td>
                <td>Budd Publisher</td>
                <td>345 Allen Blvd</td>
            </tr>
            <tr>
                <td>4-4444-4444-4</td>
                <td>Data Types</td>
                <td>Tim, Thomas, John Jones</td>
                <td>67 E Bird Blvd, 44 Fourth Ave</td>
                <td>Acme Publishing</td>
                <td>60 Main Street</td>
            </tr>
            <tr>
                <td>5-5555-5555-5</td>
                <td>Queries for Fun</td>
                <td>Mary Miller</td>
                <td>32 Launa Dr</td>
                <td>Perfect Inc</td>
                <td>309 Wish Way</td>
            </tr>
        </table>

        <p>Each book is listed with the international standard book number (ISBN), title, author, and publisher. For relational databases, one table in the database will represent one entity in the real world with each row being one instance of that entity and one column storing an attribute associated with that entity.</p>

        <ul>
            <li><h3>Step 1 - Each table should be only one real-world entity.</h3></li>
            <p>In the table above, there are 3 different entities: books, authors and publishers. In the table, we see some of the authors and publishers are repeated. Remember we want to eliminate redundancy. </p>

            <p>In the table above, the first two columns belong to the real world entity of books. The next two columns belong to the entity of author, and the last two columns belong to the entity of publisher. If we separate the data into 3 tables, we can eliminate the redundancy and have Sue Smith and Acme Publishing listed only once.</p>
        
            <table class='results'>
                <tr>
                    <th>ISBN</th>
                    <th>Title</th>
                </tr>
                <tr>
                    <td>1-1111-1111-1</td>
                    <td>Intro to Databases</td>
                </tr>
                <tr>
                    <td>2-2222-2222-2</td>
                    <td>Database Design</td>
                </tr>
                <tr>
                    <td>3-3333-3333-3</td>
                    <td>Data Retrieval</td>
                </tr>
                <tr>
                    <td>4-4444-4444-4</td>
                    <td>Data Types</td>
                </tr>
                <tr>
                    <td>5-5555-5555-5</td>
                    <td>Queries for Fun</td>
                </tr>
            </table>
            <br><br>
            <table class='results'>
                <tr>
                    <th>Author</th>
                    <th>Author Address</th>
                </tr>
                <tr>
                    <td>Sue Smith</td>
                    <td>123 Street</td>
                </tr>
                <tr>
                    <td>John Jones</td>
                    <td>44 Fourth Ave</td>
                </tr>
                <tr>
                    <td>Tim Thomas</td>
                    <td>67 E Bird Blvd</td>
                </tr>
                <tr>
                    <td>Mary Miller</td>
                    <td>32 Launa Dr.</td>
                </tr>
            </table>
            <br><br>
            <table class='results'>
                <tr>
                    <th>Publisher</th>
                    <th>Publisher Address</th>
                </tr>
                <tr>
                    <td>Acme Publishing</td>
                    <td>60 Main Street</td>
                </tr>
                <tr>
                    <td>Frontier Inc</td>
                    <td>25th N 700 E</td>
                </tr>
                <tr>
                    <td>Budd Publisher</td>
                    <td>345 Allen Blvd</td>
                </tr>
                <tr>
                    <td>Perfect Inc</td>
                    <td>309 Wish Way</td>
                </tr>
            </table>

            <p>Differentiating between entities and attributes within those entities, can be tricky sometimes. For example, maybe we find that we want to store both of the author’s home address and work address. Suddenly the address attributes of the author’s table would become a separate table called Author Address with a foreign key that relates to the author’s primary key. You will ultimately make these decisions based on what output is needed from the database. For now we will leave the entities as they are. </p>

            <li><h3>Step 2 - Identify primary and foreign keys.</h3></li>

            <p>The book entity already has a great natural key that uniquely identifies each book; the ISBN. But there is a possibility of two different authors having the same name or even publishing companies having the same name, so we need a unique primary key for each of those tables. Here they have been assigned surrogate keys for the primary keys. A surrogate key is a key that the system automatically assigns to each row to each row unique. </p>

            <table class='results'>
                <tr>
                    <th>Author ID</th>
                    <th>Author</th>
                    <th>Author Address</th>
                </tr>
                <tr>
                    <td>22</td>
                    <td>Sue Smith</td>
                    <td>123 Street</td>
                </tr>
                <tr>
                    <td>23</td>
                    <td>John Jones</td>
                    <td>44 Fourth Ave</td>
                </tr>
                <tr>
                    <td>24</td>
                    <td>Tim Thomas</td>
                    <td>67 E Bird Blvd</td>
                </tr>
                <tr>
                    <td>25</td>
                    <td>Mary Miller</td>
                    <td>32 Launa Dr.</td>
                </tr>
            </table>
            <br><br>
            <table class='results'>
                <tr>
                    <th>Publisher ID</th>
                    <th>Publisher</th>
                    <th>Publisher Address</th>
                </tr>
                <tr>
                    <td>001</td>
                    <td>Acme Publishing</td>
                    <td>60 Main Street</td>
                </tr>
                <tr>
                    <td>002</td>
                    <td>Frontier Inc</td>
                    <td>25th N 700 E</td>
                </tr>
                <tr>
                    <td>003</td>
                    <td>Budd Publisher</td>
                    <td>345 Allen Blvd</td>
                </tr>
                <tr>
                    <td>004</td>
                    <td>Perfect Inc</td>
                    <td>309 Wish Way</td>
                </tr>
            </table>
        
        
        <p>Let’s look at the relationships of the entities now, which will help us establish the foreign keys. The relationship between Publishers and Books is one to many. A book belongs to one publisher and a publisher can publish many books. The foreign key will be located in the table with the many part of the relationship. So the primary key of Publisher becomes a foreign key of Books. Notice how Acme Publishing, 001 is listed multiple times as a foreign key in the Book table. They are the publisher for two different books, “Intro to Databases” and “Date Types”.</p>

        <table class='results'>
                <tr>
                    <th>ISBN</th>
                    <th>Publisher ID</th>
                    <th>Title</th>
                </tr>
                <tr>
                    <td>1-1111-1111-1</td>
                    <td>001</td>
                    <td>Intro to Databases</td>
                </tr>
                <tr>
                    <td>2-2222-2222-2</td>
                    <td>002</td>
                    <td>Database Design</td>
                </tr>
                <tr>
                    <td>3-3333-3333-3</td>
                    <td>003</td>
                    <td>Data Retrieval</td>
                </tr>
                <tr>
                    <td>4-4444-4444-4</td>
                    <td>001</td>
                    <td>Data Types</td>
                </tr>
                <tr>
                    <td>5-5555-5555-5</td>
                    <td>004</td>
                    <td>Queries for Fun</td>
                </tr>
            </table>
            <br><br>
            <table class='results'>
                <tr>
                    <th>Publisher ID</th>
                    <th>Publisher</th>
                    <th>Publisher Address</th>
                </tr>
                <tr>
                    <td>001</td>
                    <td>Acme Publishing</td>
                    <td>60 Main Street</td>
                </tr>
                <tr>
                    <td>002</td>
                    <td>Frontier Inc</td>
                    <td>25th N 700 E</td>
                </tr>
                <tr>
                    <td>003</td>
                    <td>Budd Publisher</td>
                    <td>345 Allen Blvd</td>
                </tr>
                <tr>
                    <td>004</td>
                    <td>Perfect Inc</td>
                    <td>309 Wish Way</td>
                </tr>
            </table>

            <p>The Books and Authors tables have a many-to-many relationship; each book can have many authors, and each author can write many books. Therefore, there will be a linking table between the two tables to resolve the many-to-many into 2 one-to-many relationships. The linking table will have the foreign keys made up of each primary key of the other tables. So in our linking table we have a composite primary key, meaning two attributes together ensure each row is unique. Together these two foreign keys make up the primary key of the linking table. We have author ID 22 repeated a few times and ISBN 4-4444-4444-4 repeated a few times but when we put each foreign key together with the other foreign key they uniquely identify each row. No two rows have both those attributes together exactly the same. We can see the many-to- many being resolved here. Sue is the author of multiple books and the book ‘Data Types’ has two authors. And it is all designed properly now for a relational database.
            </p>

            <table class='results'>
                <tr>
                    <th>ISBN</th>
                    <th>Publisher ID</th>
                    <th>Title</th>
                </tr>
                <tr>
                    <td>1-1111-1111-1</td>
                    <td>001</td>
                    <td>Intro to Databases</td>
                </tr>
                <tr>
                    <td>2-2222-2222-2</td>
                    <td>002</td>
                    <td>Database Design</td>
                </tr>
                <tr>
                    <td>3-3333-3333-3</td>
                    <td>003</td>
                    <td>Data Retrieval</td>
                </tr>
                <tr>
                    <td>4-4444-4444-4</td>
                    <td>001</td>
                    <td>Data Types</td>
                </tr>
                <tr>
                    <td>5-5555-5555-5</td>
                    <td>004</td>
                    <td>Queries for Fun</td>
                </tr>
            </table>
            <br><br>
            <table class='results'>
                <tr>
                    <th>ISBN</th>
                    <th>Author ID</th>
                </tr>
                <tr>
                    <td>1-1111-1111-1</td>
                    <td>22</td>
                </tr>
                <tr>
                    <td>2-2222-2222-2</td>
                    <td>23</td>
                </tr>
                <tr>
                    <td>3-3333-3333-3</td>
                    <td>22</td>
                </tr>
                <tr>
                    <td>4-4444-4444-4</td>
                    <td>23</td>
                </tr>
                <tr>
                    <td>4-4444-4444-4</td>
                    <td>24</td>
                </tr>
                <tr>
                    <td>5-5555-5555-5</td>
                    <td>25</td>
                </tr>
            </table>
            <br><br>
            <table class='results'>
                <tr>
                    <th>Author ID</th>
                    <th>Author</th>
                    <th>Author Address</th>
                </tr>
                <tr>
                    <td>22</td>
                    <td>Sue Smith</td>
                    <td>123 Street</td>
                </tr>
                <tr>
                    <td>23</td>
                    <td>John Jones</td>
                    <td>44 Fourth Ave</td>
                </tr>
                <tr>
                    <td>24</td>
                    <td>Tim Thomas</td>
                    <td>67 E Bird Blvd</td>
                </tr>
                <tr>
                    <td>25</td>
                    <td>Mary Miller</td>
                    <td>32 Launa Dr.</td>
                </tr>
            </table>
            <br><br>
            <img class="narrowimg" src="images/author_erd.png" alt="photo of the erd for the author schema">
            <li><h3>Step 3 - Make sure the data is normalized.</h3></li>

            <p>Separating the data into real-world entities and establishing relationships and reducing redundancy are is part of normalizing the data. But there are a standard set of steps to follow to ensure your data is normalized.</p>
            <p>There are 7 normal forms that must be applied in order. Our course covers the first 3 normal forms.              </p>
            <p>First Normal Form (1NF) - The value stored at the intersection of each row and column must be a scalar value, and the table must not contain any repeating columns. Scalar means – being described as a single value that might belong to a number of fields, but itself is one value. The table should also have a primary key.</p>
            <p>Second Normal Form (2NF) - Every non-key column must depend on the entire primary key. This normal form has to do with composite keys where each field in the row has to rely on both parts of the composite primary key.</p>
            <p>Third Normal Form (3NF) - Every non-key column must depend only on the primary key. Like 2NF but now we are looking at only the one part primary key.</p>
            <p>By following normalization rules (or normal forms) we reduce data redundancy. The attributes of each entity are organized in a way that increases data consistency.</p>
            <p>Normalization can slow performance and sometimes data is denormalized to improve this performance. Denormalizing can ignore some normal forms if the organization see this as a benefit to the system.</p>
            <br><br>
            <h2>Create Statements</h2>
            <p>The <code>CREATE TABLE</code> statement allows you to create a new table in a database.</p>
            <p>The basic syntax of a <code>CREATE TABLE</code> statement is as follows</p>
            <pre><code>CREATE TABLE table_name (
    column1 datatype constraints,
    column2 datatype constraints,
    column3 datatype constraints,
    ...
    columnN datatype constraints
);</code></pre>
                <ul>
                    <li><strong>table_name</strong>: is the name for the table you create</li>
                    <li><strong>column1, column2, column3, ... columnN</strong>: are the names of the columns in the table</li>
                    <li><strong>datatype</strong>: is the data type of the column, such as VARCHAR, INT, and DATE</li>
                    <li><strong>constraints</strong>: are the constraints for the column, such as NOT NULL, UNIQUE, and PRIMARY KEY</li>
                </ul>
                <p>Here is an example of a <code>CREATE TABLE</code> statement that creates a table called <code>students</code> with three columns: <code>id</code>, <code>name</code>, and <code>age</code>.</p>
                <pre><code>CREATE TABLE students (
    id INT PRIMARY KEY,
    name VARCHAR(50) NOT NULL,
    age INT NOT NULL
);</code></pre>
                <p>This statement creates a table called <code>students</code> with three columns: <code>id</code>, <code>name</code>, and <code>age</code>. The <code>id</code> column is the primary key for the table, and it is of type INT. The <code>name</code> column is of type VARCHAR(50), and it cannot be NULL. The <code>age</code> column is of type INT, and it cannot be NULL.</p>
                <h1>MySQL DROP Statement</h1>
    <p>The <strong>DROP</strong> statement in MySQL is used to permanently delete a database, table, or column. Be cautious when using this command, as it cannot be undone.</p>

    <h2>Dropping a Database</h2>
    <p>To delete an entire database, use the following command:</p>
    <pre><code>DROP DATABASE database_name;</code></pre>

    <h2>Dropping a Table</h2>
    <p>To remove a table along with all its data:</p>
    <pre><code>DROP TABLE table_name;</code></pre>

    <h2>Dropping a Column</h2>
    <p>To delete a column from a table, use:</p>
    <pre><code>ALTER TABLE table_name DROP COLUMN column_name;</code></pre>
    
    <h2>Example</h2>
    <p>Suppose we have a database named <strong>college_db</strong> and a table named <strong>students</strong>. Here’s how you can drop them:</p>
    
    <h3>Deleting the Database</h3>
    <pre><code>DROP DATABASE college_db;</code></pre>
    
    <h3>Deleting the Table</h3>
    <pre><code>DROP TABLE students;</code></pre>
    
    <h3>Deleting a Column from the Table</h3>
    <pre><code>ALTER TABLE students DROP COLUMN age;</code></pre>
    
    <p><strong>Note:</strong> Always double-check before using the DROP statement, as it permanently removes data.</p>
        </ul>
        </div>
    </main>
    <footer>
            <hr>
            <p>CIT 111 - Introduction to Databases - BYUI - andersonju</p>
        </footer>
</body>

</html>
